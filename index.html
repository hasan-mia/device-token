<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>FCM Token Generator</title>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-messaging.js"></script>
	</head>
	<body>
		<h2>Click the button to get your FCM Token</h2>
		<button onclick="getToken()">Generate Token</button>
		<pre id="output"></pre>

		<script>
			// Your Firebase config
			const firebaseConfig = {
				apiKey: "AIzaSyC8Pi790CdyUkW1NBbnvBdRNSGiyBuXWeY",
				authDomain: "roshoon-app.firebaseapp.com",
				projectId: "roshoon-app",
				storageBucket: "roshoon-app.firebasestorage.app",
				messagingSenderId: "599109972712",
				appId: "1:599109972712:web:eb9f376bc3245b5d1f8f5d",
				measurementId: "G-3LTJ3S3F8Q",
			};

			firebase.initializeApp(firebaseConfig);
			const messaging = firebase.messaging();

			async function getToken() {
				const output = document.getElementById("output");

				try {
					const permission = await Notification.requestPermission();
					if (permission !== "granted") {
						output.innerText = "Notification permission not granted.";
						return;
					}

					const registration = await navigator.serviceWorker.register(
						"firebase-messaging-sw.js",
					);

					const currentToken = await messaging.getToken({
						vapidKey:
							"BGc7SKrnaaeAMH5Iz01xyQOjHGOjltLUhxoDPn-fqVls2aNHCJ8pT5VdJiZWamVxrZBZF19wiixtyLcgK095_Sc", // <-- Replace this with your actual VAPID key
						serviceWorkerRegistration: registration,
					});

					if (currentToken) {
						output.innerText = "FCM Token:\n" + currentToken;
						console.log("FCM Token:", currentToken);
					} else {
						output.innerText = "No registration token available.";
					}
				} catch (err) {
					console.error("Error getting token:", err);
					output.innerText = "Error: " + err.message;
				}
			}

			window.getToken = getToken;
		</script>
	</body>
</html>
